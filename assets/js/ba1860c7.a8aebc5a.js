/*! For license information please see ba1860c7.a8aebc5a.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[40073],{61647:(e,t,n)=>{n.d(t,{ZP:()=>s});var o=n(24246),r=n(71670);function i(e){const t=Object.assign({admonition:"admonition",p:"p",strong:"strong",a:"a"},(0,r.ah)(),e.components);return(0,o.jsxs)(t.admonition,{type:"caution",children:[(0,o.jsxs)(t.p,{children:["This documentation is still ",(0,o.jsx)(t.strong,{children:"experimental"})," and details are subject to changes as we iterate. Feel free to share your feedback on the ",(0,o.jsx)(t.a,{href:"https://github.com/reactwg/react-native-new-architecture/discussions/8",children:"discussion inside the working group"})," for this page."]}),(0,o.jsxs)(t.p,{children:["Moreover, it contains several ",(0,o.jsx)(t.strong,{children:"manual steps"}),". Please note that this won't be representative of the final developer experience once the New Architecture is stable. We're working on tools, templates and libraries to help you get started fast on the New Architecture, without having to go through the whole setup."]})]})}const s=function(e={}){const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,o.jsx)(t,Object.assign({},e,{children:(0,o.jsx)(i,e)})):i(e)}},77112:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>c,toc:()=>l});var o=n(24246),r=n(71670),i=n(61647);const s={id:"new-architecture-troubleshooting",title:"Troubleshooting"},a=void 0,c={id:"new-architecture-troubleshooting",title:"Troubleshooting",description:"This page contains resolutions to common problem you might face when migrating to the New Architecture.",source:"@site/versioned_docs/version-0.73/new-architecture-troubleshooting.md",sourceDirName:".",slug:"/new-architecture-troubleshooting",permalink:"/docs/new-architecture-troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/react-native-website/blob/main/website/../docs/new-architecture-troubleshooting.md",tags:[],version:"0.73",lastUpdatedAt:1704504779,formattedLastUpdatedAt:"Jan 6, 2024",frontMatter:{id:"new-architecture-troubleshooting",title:"Troubleshooting"},sidebar:"docs",previous:{title:"React 18 & React Native",permalink:"/docs/react-18-and-react-native"},next:{title:"Appendix",permalink:"/docs/new-architecture-appendix"}},d={},l=[{value:"CocoaPods and Node Reset",id:"cocoapods-and-node-reset",level:2},{value:"Android build is failing with <code>OutOfMemoryException</code>",id:"android-build-is-failing-with-outofmemoryexception",level:2},{value:"Android NDK and Mac with M1 Apple Silicon CPUs",id:"android-ndk-and-mac-with-m1-apple-silicon-cpus",level:2}];function h(e){const t=Object.assign({p:"p",h2:"h2",ol:"ol",li:"li",code:"code",pre:"pre",a:"a"},(0,r.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.ZP,{}),"\n",(0,o.jsx)(t.p,{children:"This page contains resolutions to common problem you might face when migrating to the New Architecture."}),"\n",(0,o.jsx)(t.h2,{id:"cocoapods-and-node-reset",children:"CocoaPods and Node Reset"}),"\n",(0,o.jsx)(t.p,{children:"The CocoaPods integration will see frequent updates as we rollout the New Architecture, and it is possible to end up with your workspace in a broken state after one of these changes. You may clean up any changes related to the codegen by performing some of these steps:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Run ",(0,o.jsx)(t.code,{children:"bundle exec pod deintegrate"})," in your ios directory and then rerun ",(0,o.jsx)(t.code,{children:"RCT_NEW_ARCH_ENABLED=1 bundle exec pod install"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["Delete ",(0,o.jsx)(t.code,{children:"node_modules"})," and re-run ",(0,o.jsx)(t.code,{children:"yarn install"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(t.h2,{id:"android-build-is-failing-with-outofmemoryexception",children:["Android build is failing with ",(0,o.jsx)(t.code,{children:"OutOfMemoryException"})]}),"\n",(0,o.jsxs)(t.p,{children:["If your Android Gradle builds are failing with: ",(0,o.jsx)(t.code,{children:"OutOfMemoryException: Out of memory: Java heap space."})," or similar errors related to low memory, you might need to increase the memory allocated to the JVM."]}),"\n",(0,o.jsxs)(t.p,{children:["You can do that by editing the ",(0,o.jsx)(t.code,{children:"gradle.properties"})," file in your ",(0,o.jsx)(t.code,{children:"android/gradle.properties"})," folder:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-diff",children:" # Specifies the JVM arguments used for the daemon process.\n # The setting is particularly useful for tweaking memory settings.\n # Default value: -Xmx1024m -XX:MaxPermSize=256m\n-# org.gradle.jvmargs=-Xmx2048m -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\n+org.gradle.jvmargs=-Xmx4g -XX:MaxPermSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Make sure to uncomment the line and set the preferred memory size with the ",(0,o.jsx)(t.code,{children:"-Xmx"})," parameter. 2Gb should be the minimum required and 4Gb is recommended."]}),"\n",(0,o.jsx)(t.h2,{id:"android-ndk-and-mac-with-m1-apple-silicon-cpus",children:"Android NDK and Mac with M1 Apple Silicon CPUs"}),"\n",(0,o.jsxs)(t.p,{children:["We're aware of a series of incompatibilities between the Android NDK and Macs on M1 CPUs (",(0,o.jsx)(t.a,{href:"https://github.com/android/ndk/issues/1299",children:"here"})," and ",(0,o.jsx)(t.a,{href:"https://github.com/android/ndk/issues/1410",children:"here"}),").\nAs the New Architectecture relies on the NDK, you might face problems during your build."]}),"\n",(0,o.jsx)(t.p,{children:"React Native version 0.70 and 0.71 contains fixes for those build failures, and we invite you to update to those versions whenever possible."})]})}const u=function(e={}){const{wrapper:t}=Object.assign({},(0,r.ah)(),e.components);return t?(0,o.jsx)(t,Object.assign({},e,{children:(0,o.jsx)(h,e)})):h(e)}},71426:(e,t,n)=>{var o=n(27378),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var o,i={},d=null,l=null;for(o in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,o)&&!c.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:d,ref:l,props:i,_owner:a.current}}t.Fragment=i,t.jsx=d,t.jsxs=d},24246:(e,t,n)=>{e.exports=n(71426)},71670:(e,t,n)=>{n.d(t,{Zo:()=>a,ah:()=>i});var o=n(27378);const r=o.createContext({});function i(e){const t=o.useContext(r);return o.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const s={};function a({components:e,children:t,disableParentContext:n}){let a;return a=n?"function"==typeof e?e({}):e||s:i(e),o.createElement(r.Provider,{value:a},t)}}}]);